<!DOCTYPE html>
<html>
 <head>
   <meta charset="utf-8">
   <title>¿Cómo se escribe?</title>
   <script type= "text/javascript" src="js/phaser.min.js"></script>
   <link href="css/css.css" rel="stylesheet" type="text/css" />
   <link rel="icon" type="image/png" href="assets/Misc/HVGamesIco.ico" />

 </head>
 <body>
   <center> <div id="gameDiv"> </div> </center>
   <script type="text/javascript">
  /*Tamaño del juego*/
   var game= new Phaser.Game(1000, 515, Phaser.AUTO, 'gameDiv',{preload:preload, create: create, update: update});
  /*Se cargan los archivos*/
    function preload(){
      /*Se cargan las imagenes*/
      game.load.image('loading', 'assets/Misc/load.png');
      game.load.image('menu', 'assets/Misc/menu.png');
      game.load.spritesheet('playbt', 'assets/Misc/playbt.png', 200,60);
      game.load.image('play', 'assets/Misc/play.png');
      game.load.spritesheet('nube', 'assets/Misc/nube.png');
      game.load.image('cuadropregunta', 'assets/Misc/cuadropregunta.png');
      game.load.spritesheet('bien', 'assets/Misc/Bien.png');
      game.load.spritesheet('mal', 'assets/Misc/Mal.png');
      game.load.spritesheet('sig', 'assets/Misc/siguiente.png', 280,57);

      /*Se cargan el sonido*/
    }
/*Variables globales*/
    var button;
    var menu;
    var load;
    var ale = 0;
    var acierto;
    var error1;
    var error2;
    /*Preguntas del nivel de las nubes*/
    var preguntasNubes = [
      [ 'Pregunta1'],
      [ 'Pregunta2' ],
      [ 'Pregunta3' ],
      [ 'Pregunta4'],
      [ 'Pregunta5'],
    ];
    /*Respuesta correcta*/
    var respuestaCN = [
     [ 'Respuesta1'],
     [ 'Respuesta2' ],
     [ 'Respuesta3' ],
     [ 'Respuesta4'],
     [ 'Respuesta5'],
    ];
    /*Respuestas incorrectas*/
    var respuestaIN1 = [
     [ 'Incorrecto1'],
     [ 'Incorrecto2' ],
     [ 'Incorrecto3' ],
     [ 'Incorrecto4'],
     [ 'Incorrecto5'],
    ];

    var respuestaIN2 = [
     [ 'Incorrecto1'],
     [ 'Incorrecto2' ],
     [ 'Incorrecto3' ],
     [ 'Incorrecto4'],
     [ 'Incorrecto5'],
    ];
    /*La variable que hace que todo se repita*/
    var conteo=0;
    var texto1;
    var texto2;
    var texto3;



    function create(){

     load = game.add.image(0,0, 'loading');
     menu = game.add.sprite(0,0,'menu');
     /*Se crea el boton play y llama a la funcion actionOnClick que contiene el codigo del primer mundo*/
     button = game.add.button(game.world.centerX - 100, 400, 'playbt', actionOnClick, this, 1, 0, 2);
     button.onInputOver.add(over, this);
     button.onInputOut.add(out, this);
     button.onInputUp.add(up, this);

    }
    /*Esto es solo para estetica del boton play*/
    function up() {
    console.log('button up', arguments);
    }

    function over() {
    console.log('button over');
    }

    function out() {
    console.log('button out');
    }

    function actionOnClick () {
      /*Elimino la pantalla inicial*/
      load.kill();
      menu.kill();
      button.kill();

      /*Se crea la pantalla del juego donde play es el fondo*/
      game.add.sprite(0,0,'play');
      game.add.sprite(20,380,'cuadropregunta');
      /*Genero un numero aleatorio del 0 al 2*/
      ale=game.rnd.integerInRange(0, 2);
      /*Lo muestro para hacer pruebas*/
      game.add.text(16,16,'Caso: '+ale,{fontsize:'32px',fill:'#000'});
      /*Muestro la pregunta con un arreglo*/
      game.add.text(40,410,'*'+preguntasNubes[conteo],{fontsize:'32px',fill:'#000'});
      /*Dependiendo del número se mostrara las opciones en diferentes formas*/
      switch (ale) {
        case 0:

        acierto = game.add.button(100, 200, 'nube');
        error1 = game.add.button(game.world.centerX - 105, 100, 'nube');
        error2 = game.add.button(705, 200, 'nube');

        texto1 = game.add.text(120,240,''+respuestaCN[conteo],{fontsize:'32px',fill:'#000'});
        texto2 = game.add.text(game.world.centerX - 85, 140,''+respuestaIN1[conteo],{fontsize:'32px',fill:'#000'});
        texto3 = game.add.text(725,240,''+respuestaIN2[conteo],{fontsize:'32px',fill:'#000'});

        error1.onInputUp.add(Error1N, this);
        error2.onInputUp.add(Error1N, this);
        acierto.onInputUp.add(CorrectoN, this);

        game.add.text(16,50,'op1',{fontsize:'32px',fill:'#000'});
          break;

       case 1:
       error1 = game.add.button(100, 200, 'nube');
       acierto = game.add.button(game.world.centerX - 105, 100, 'nube');
       error2 = game.add.button(705, 200, 'nube');

       texto1 = game.add.text(120,240,''+respuestaIN1[conteo],{fontsize:'32px',fill:'#000'});
       texto2 = game.add.text(game.world.centerX - 85, 140,''+respuestaCN[conteo],{fontsize:'32px',fill:'#000'});
       texto3 = game.add.text(725,240,''+respuestaIN2[conteo],{fontsize:'32px',fill:'#000'});

       error1.onInputUp.add(Error1N, this);
       error2.onInputUp.add(Error1N, this);
       acierto.onInputUp.add(CorrectoN, this);

       game.add.text(16,50,'op2',{fontsize:'32px',fill:'#000'});
         break;

       case 2:
       error2 = game.add.button(100, 200, 'nube');
       error1 = game.add.button(game.world.centerX - 105, 100, 'nube');
       acierto = game.add.button(705, 200, 'nube');

       texto1 = game.add.text(120,240,''+respuestaIN2[conteo],{fontsize:'32px',fill:'#000'});
       texto2 = game.add.text(game.world.centerX - 85, 140,''+respuestaIN1[conteo],{fontsize:'32px',fill:'#000'});
       texto3 = game.add.text(725,240,''+respuestaCN[conteo],{fontsize:'32px',fill:'#000'});

       error1.onInputUp.add(Error1N, this);
       error2.onInputUp.add(Error1N, this);
       acierto.onInputUp.add(CorrectoN, this);

       game.add.text(16,50,'op3',{fontsize:'32px',fill:'#000'});
         break;
      }


    }

    function  Error1N(){
      conteo++;
      error1.kill();
      error2.kill();
      acierto.kill();
      texto1.kill();
      texto2.kill();
      texto3.kill();
      game.add.sprite(game.world.centerX - 140, 150, 'mal');
      game.add.button(game.world.centerX - 140, 290, 'sig', actionOnClick, this, 1, 0, 2);

    }

    function  CorrectoN(){
      conteo++;
      error1.kill();
      error2.kill();
      acierto.kill();
      texto1.kill();
      texto2.kill();
      texto3.kill();
      game.add.sprite(game.world.centerX - 140, 150, 'bien');
      game.add.button(game.world.centerX - 140, 290, 'sig', actionOnClick, this, 1, 0, 2);

    }

    function update(){

    }


</script>



 </body>
</html>
